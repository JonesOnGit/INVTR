<!-- NEW INVITE VIEW -->


    <style>

#pac-input {
  background-color: #fff;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  margin-left: 12px;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 300px;
}

#pac-input:focus {
  border-color: #4d90fe;
}

.pac-container {
  font-family: Roboto;
}

#type-selector {
  color: #fff;
  background-color: #4d90fe;
  padding: 5px 11px 0px 11px;
}

#type-selector label {
  font-family: Roboto;
  font-size: 13px;
  font-weight: 300;
}

    </style>


    <script>
function initMap() {

  var input = /** @type {!HTMLInputElement} */(
      document.getElementById('invite_address'));

  var types = document.getElementById('type-selector');
  var autocomplete = new google.maps.places.Autocomplete(input);
 

  autocomplete.addListener('place_changed', function() {
    infowindow.close();
    marker.setVisible(false);
    var place = autocomplete.getPlace();
    alert(place);
  });
}

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initMap"
        async defer></script>
        <script src="https://apis.google.com/js/client.js"></script>

<script>
console.log(document.cookie);
String.prototype.toProperCase = function(){
    return this.toLowerCase().replace(/(^[a-z]| [a-z]|-[a-z])/g, 
        function($1){
            return $1.toUpperCase();
        }
    );
};
function auth() {
  var config = {
    'client_id': '832245431959-4qt4jj9euf22pd3d6tdsqknrdd32nuem.apps.googleusercontent.com',
    'scope': 'https://www.google.com/m8/feeds'
  };
  gapi.auth.authorize(config, function() {
    fetch(gapi.auth.getToken());
  });
}
function fetch(token) {
  $.ajax({
    url: 'https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=1000',
    dataType: 'jsonp',
    data: token
  }).done(function(data) {
    var arr = new Array();
    var nameArr = new Array();
    var nameObj = {};
    console.log(data);

    var d = data["feed"]["entry"];
    $.each(d, function(i, obj) {

      try {
        var email = obj["gd$email"][0]["address"].toLowerCase();
        var name = obj["title"]["$t"];
        var img = obj["link"][0]["href"];
        arr.push(email);
        if (name != "") {
          nameArr.push(name.toProperCase());
          nameObj[name] = email;
          nameObj[email] = img;
        }
        
      } catch(err) {

      }
    });
    arr.sort();
    nameArr.sort()
    for (var i in arr) {
      // console.log();

      // if name !== undefined
      if (typeof name != 'undefined' && typeof nameObj[nameArr[i]] != 'undefined') {

        var imageUrl = nameObj[nameObj[nameArr[i]]];
        $("#myModal").append("<img src='" + imageUrl + "?access_token=" + token["access_token"] + "' height='50px' width='50px'>");

        $("#myModal").append("  " + nameArr[i] + "  ");

        $("#myModal").append(nameObj[nameArr[i]]);
        $("#myModal").append("<input class='emailCheckbox' type=checkbox name='" + nameObj[nameArr[i]] + "'>");
        $("#myModal").append("<br>");
      }
 
    }
    console.log(data)
    document.cookie = "ownerEmail=" + data["feed"]["id"]["$t"];
    console.log(document.cookie)
  });
}

      $(document).on('page:change', function () {

        $("emailCheckbox").click(function() {
          alert( "Handler for .click() called." );
        });
      }); 

</script>

<%= render 'form', invite: @invite, url: invites_path %>